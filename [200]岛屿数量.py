# -*- coding: utf-8 -*-

"""
@Time        : 2020/7/24
@Author      : jim
@File        : [200]å²›å±¿æ•°é‡
@Description : 
"""
# ç»™ä½ ä¸€ä¸ªç”± '1'ï¼ˆé™†åœ°ï¼‰å’Œ '0'ï¼ˆæ°´ï¼‰ç»„æˆçš„çš„äºŒç»´ç½‘æ ¼ï¼Œè¯·ä½ è®¡ç®—ç½‘æ ¼ä¸­å²›å±¿çš„æ•°é‡ã€‚
#
#  å²›å±¿æ€»æ˜¯è¢«æ°´åŒ…å›´ï¼Œå¹¶ä¸”æ¯åº§å²›å±¿åªèƒ½ç”±æ°´å¹³æ–¹å‘æˆ–ç«–ç›´æ–¹å‘ä¸Šç›¸é‚»çš„é™†åœ°è¿žæŽ¥å½¢æˆã€‚
#
#  æ­¤å¤–ï¼Œä½ å¯ä»¥å‡è®¾è¯¥ç½‘æ ¼çš„å››æ¡è¾¹å‡è¢«æ°´åŒ…å›´ã€‚
#
#
#
#  ç¤ºä¾‹ 1:
#
#  è¾“å…¥:
# [
# ['1','1','1','1','0'],
# ['1','1','0','1','0'],
# ['1','1','0','0','0'],
# ['0','0','0','0','0']
# ]
# è¾“å‡º:Â 1
#
#
#  ç¤ºä¾‹ 2:
#
#  è¾“å…¥:
# [
# ['1','1','0','0','0'],
# ['1','1','0','0','0'],
# ['0','0','1','0','0'],
# ['0','0','0','1','1']
# ]
# è¾“å‡º: 3
# è§£é‡Š: æ¯åº§å²›å±¿åªèƒ½ç”±æ°´å¹³å’Œ/æˆ–ç«–ç›´æ–¹å‘ä¸Šç›¸é‚»çš„é™†åœ°è¿žæŽ¥è€Œæˆã€‚
#
#  Related Topics æ·±åº¦ä¼˜å…ˆæœç´¢ å¹¿åº¦ä¼˜å…ˆæœç´¢ å¹¶æŸ¥é›†
#  ðŸ‘ 670 ðŸ‘Ž 0


# æ€è·¯1ï¼šdfséåŽ†æ•°ç»„å…ƒç´ ï¼Œé‡åˆ°å²›å±¿çš„æ—¶å€™ï¼Œåˆ¤æ–­å²›å±¿æ°´å¹³å’Œç«–ç›´æ–¹å‘æœ‰æ²¡æœ‰åˆ«çš„é™†åœ°èŠ‚ç‚¹
# å®šä¹‰æ·±åº¦ä¼˜å…ˆç®—æ³•æ–¹æ³•ï¼Œä¼ å…¥çŸ©é˜µä¸­ä¸º1çš„ç‚¹ï¼Œå’Œå½“å‰èŠ‚ç‚¹çš„å·¦è¾¹
def dfs(self, grid, r, c):
    grid[r][c] = 0
    # å°†å¤„ç†çš„åæ ‡å€¼ç½®ä¸º0ï¼Œè¡¨ç¤ºå·²ç»å¤„ç†è¿‡
    nr, nc = len(grid), len(grid[0])
    for x, y in [(r, c - 1), (r, c + 1), (r - 1, c), (r + 1, c)]:
        if nr > x >= 0 and nc > y >= 0 and grid[x][y] == '1':
            # ç‚¹åœ¨çŸ©é˜µèŒƒå›´å†…ï¼Œä¸”ä¸º1çš„è¯ï¼Œè¿›è¡Œå¤„ç†
            self.dfs(grid, x, y)


def numIslands(self, grid: List[List[str]]) -> int:
    nr = len(grid)
    if nr == 0:
        return 0
    nc = len(grid[0])
    isand = 0
    for r in range(nr):
        for c in range(nc):
            if grid[r][c] == '1':
                isand += 1
                self.dfs(grid, r, c)

    return isand
# å®˜æ–¹æ¨¡æ¿æ•ˆçŽ‡å¾ˆé«˜ï¼Œä½†æ˜¯æ”¹äº†åŽŸåˆ—è¡¨ï¼Œæœ€å¥½è¿˜æ˜¯ç”¨å‰¯æœ¬æ“ä½œ
# æ‰§è¡Œç”¨æ—¶ï¼š76 ms, åœ¨æ‰€æœ‰ Python3 æäº¤ä¸­å‡»è´¥äº†82.11%çš„ç”¨æˆ·
# å†…å­˜æ¶ˆè€—ï¼š14.2 MB, åœ¨æ‰€æœ‰ Python3 æäº¤ä¸­å‡»è´¥äº†6.67%çš„ç”¨æˆ·

# å°è¯•ç”¨dfsæ¨¡æ¿è¯•ä¸€ä¸‹
class Solution:
    def dfs(self, grid, r, c):
        # å°†å¤„ç†çš„åæ ‡å€¼ç½®ä¸º0ï¼Œè¡¨ç¤ºå·²ç»å¤„ç†è¿‡
        nr , nc = len(grid), len(grid[0])
        for x,y in [(r,c-1),(r,c+1),(r-1,c),(r+1,c)]:
            if nr > x >= 0 and nc > y >= 0 and grid[x][y] == '1' and not (x,y) in self.visited:
            # ç‚¹åœ¨çŸ©é˜µèŒƒå›´å†…ï¼Œä¸”ä¸º1çš„è¯ï¼Œè¿›è¡Œå¤„ç†
                self.dfs(grid ,x ,y)

    def numIslands(self, grid: List[List[str]]) -> int:
        nr = len(grid)
        if nr == 0:
            return 0
        nc = len(grid[0])
        isand = 0
        self.visited = {}
        # ä½¿ç”¨äº†é¢å¤–çš„ç©ºé—´è®°å½•è®¿é—®èŠ‚ç‚¹ï¼Œç©ºé—´å¤æ‚åº¦é«˜
        for r in range(nr):
            for c in range(nc):
                if grid[r][c] == '1' and  not (r,c) in self.visited:
                    isand += 1
                    self.dfs(grid,r,c)

        return isand


# æ‰§è¡Œè€—æ—¶: 96ms, å‡»è´¥äº†36.70 % çš„Python3ç”¨æˆ·
# å†…å­˜æ¶ˆè€—: 17.7MB, å‡»è´¥äº†6.67 % çš„Python3ç”¨æˆ·

# æ€è·¯2ï¼šå¹¿åº¦ä¼˜å…ˆæœç´¢ï¼Œè¿­ä»£æ³•è§£å†³ï¼Œç”¨ä¸€ä¸ªåŒç«¯é˜Ÿåˆ—å­˜å‚¨å¾…å¤„ç†çš„èŠ‚ç‚¹,æ¯æ¬¡å¤„ç†æŠŠé‚»å±…åŠ å…¥å³ç«¯ï¼Œç„¶åŽä»Žå·¦ä¾§å¼¹å‡ºä¸€ä¸ªæ•°å€¼å¤„ç†
def numIslands(self, grid: List[List[str]]) -> int:
    nr = len(grid)
    if nr == 0:
        return 0
    nc = len(grid[0])
    isand = 0
    for r in range(nr):
        for c in range(nc):
            if grid[r][c] == '1':
                isand += 1
                grid[r][c] = '0'
                neigh = collections.deque([(r,c)])
                while neigh:
                    row, col = neigh.popleft()
                    for x, y in [(row,col-1),(row,col+1),(row-1,col),(row+1,col)]:
                        if 0 <= x < nr and 0 <= y < nc and grid[x][y] == '1':
                            grid[x][y] = '0'
                            neigh.append((x,y))

    return isand

# æ‰§è¡Œè€—æ—¶:72 ms,å‡»è´¥äº†89.99% çš„Python3ç”¨æˆ·
# å†…å­˜æ¶ˆè€—:14.2 MB,å‡»è´¥äº†6.67% çš„Python3ç”¨æˆ·